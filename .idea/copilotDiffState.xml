<?xml version="1.0" encoding="UTF-8"?>
<project version="4">
  <component name="CopilotDiffPersistence">
    <option name="pendingDiffs">
      <map>
        <entry key="$PROJECT_DIR$/src/test/java/steps/HomeSteps.java">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/src/test/java/steps/HomeSteps.java" />
              <option name="originalContent" value="package steps;&#10;&#10;import com.microsoft.playwright.Page;&#10;import io.cucumber.java.en.*;&#10;import org.junit.Assert;&#10;import pages.HomePage;&#10;import pages.ProductPage;&#10;import pages.CartPage;&#10;import pages.OrderPage;&#10;import utils.JsonUtil;&#10;import utils.PlaywrightFactory;&#10;import hooks.Hooks;&#10;&#10;&#10;public class HomeSteps {&#10;&#10;    Page page = PlaywrightFactory.getPage();&#10;    HomePage homePage = new HomePage(page);&#10;    ProductPage productPage = new ProductPage(page);&#10;    CartPage cartPage = new CartPage(page);&#10;    OrderPage orderPage = new OrderPage(page);&#10;&#10;    // -------------------- Existing Steps --------------------&#10;&#10;    @Given(&quot;user launches Demoblaze application&quot;)&#10;    public void user_launches_application() {&#10;        homePage.openApplication(JsonUtil.get(&quot;application.url&quot;));&#10;    }&#10;&#10;    @Then(&quot;home page should be displayed&quot;)&#10;    public void home_page_displayed() {&#10;        Assert.assertTrue(homePage.isLoginVisible());&#10;    }&#10;&#10;    @When(&quot;user signs up with valid data&quot;)&#10;    public void user_signs_up() {&#10;        // Signup already handled in Hooks&#10;        Assert.assertTrue(true);&#10;    }&#10;&#10;    @Then(&quot;signup should be successful&quot;)&#10;    public void signup_successful() {&#10;        Assert.assertTrue(true);&#10;    }&#10;&#10;    @When(&quot;user logs in with valid data&quot;)&#10;    public void user_logs_in_with_valid_data() {&#10;&#10;        String username = Hooks.getSignupUsername();&#10;        String password = Hooks.getSignupPassword();&#10;&#10;        try {&#10;            page.waitForSelector(&quot;#login2&quot;,&#10;                    new Page.WaitForSelectorOptions().setTimeout(5000));&#10;        } catch (Exception ignored) {&#10;        }&#10;&#10;        homePage.login(username, password);&#10;    }&#10;&#10;    @Then(&quot;login should be successful&quot;)&#10;    public void login_should_be_successful() {&#10;        String welcome = homePage.getWelcomeText();&#10;        Assert.assertTrue(&#10;                &quot;Login failed. Welcome text: '&quot; + welcome + &quot;'&quot;,&#10;                homePage.isLoginSuccessful()&#10;        );&#10;    }&#10;&#10;    // -------------------- Cart Step Definitions --------------------&#10;&#10;    @When(&quot;user selects product {string}&quot;)&#10;    public void user_selects_product(String productName) {&#10;        homePage.selectProduct(productName);&#10;    }&#10;&#10;    @When(&quot;user adds product to cart&quot;)&#10;    public void user_adds_product_to_cart() {&#10;        // ProductPage.addToCart() now handles dialog acceptance via onceDialog()&#10;        productPage.addToCart();&#10;    }&#10;&#10;    @Then(&quot;product should be added to cart successfully&quot;)&#10;    public void product_should_be_added_to_cart_successfully() {&#10;        homePage.openCart();&#10;        Assert.assertTrue(cartPage.isProductPresent());&#10;    }&#10;&#10;    @When(&quot;user navigates to cart page&quot;)&#10;    public void user_navigates_to_cart_page() {&#10;        homePage.openCart();&#10;    }&#10;&#10;    @Then(&quot;selected product should be displayed in cart&quot;)&#10;    public void selected_product_should_be_displayed_in_cart() {&#10;        Assert.assertTrue(cartPage.isProductPresent());&#10;    }&#10;&#10;    @When(&quot;user deletes the product from cart&quot;)&#10;    public void user_deletes_the_product_from_cart() {&#10;        cartPage.deleteProduct();&#10;    }&#10;&#10;    @Then(&quot;cart should be empty&quot;)&#10;    public void cart_should_be_empty() {&#10;        Assert.assertTrue(cartPage.isCartEmpty());&#10;    }&#10;&#10;    // -------------------- Place Order --------------------&#10;&#10;    @When(&quot;user clicks on Place Order&quot;)&#10;    public void user_clicks_on_place_order() {&#10;        try {&#10;            // Use OrderPage helper to click&#10;            orderPage.clickPlaceOrder();&#10;            page.waitForSelector(&quot;#orderModal&quot;, new Page.WaitForSelectorOptions().setTimeout(5000));&#10;        } catch (Exception e) {&#10;            // fallback to previous approach&#10;            try {&#10;                page.click(&quot;text=Place Order&quot;);&#10;                page.waitForSelector(&quot;#orderModal&quot;, new Page.WaitForSelectorOptions().setTimeout(5000));&#10;            } catch (Exception ignored) {&#10;            }&#10;        }&#10;    }&#10;&#10;    @When(&quot;user enters order details&quot;)&#10;    public void user_enters_order_details() {&#10;        String name = &quot;Test User&quot;;&#10;        String country = &quot;India&quot;;&#10;        String city = &quot;Pune&quot;;&#10;        String card = &quot;4111111111111111&quot;;&#10;        String month = &quot;12&quot;;&#10;        String year = &quot;2025&quot;;&#10;&#10;        try { name = JsonUtil.get(&quot;order.name&quot;); } catch (Exception ignored) {}&#10;        try { country = JsonUtil.get(&quot;order.country&quot;); } catch (Exception ignored) {}&#10;        try { city = JsonUtil.get(&quot;order.city&quot;); } catch (Exception ignored) {}&#10;        try { card = JsonUtil.get(&quot;order.card&quot;); } catch (Exception ignored) {}&#10;        try { month = JsonUtil.get(&quot;order.month&quot;); } catch (Exception ignored) {}&#10;        try { year = JsonUtil.get(&quot;order.year&quot;); } catch (Exception ignored) {}&#10;&#10;        // Use OrderPage helper to fill form&#10;        orderPage.fillOrderForm(name, country, city, card, month, year);&#10;    }&#10;&#10;    @When(&quot;user confirms the purchase&quot;)&#10;    public void user_confirms_the_purchase() {&#10;        // Use OrderPage helper to click purchase and wait for confirmation&#10;        orderPage.clickPurchase();&#10;        // Wait briefly and then rely on OrderPage.isOrderSuccessful&#10;        try {&#10;            Thread.sleep(800); // short pause to allow dialog&#10;        } catch (InterruptedException ignored) {}&#10;        if (!orderPage.isOrderSuccessful()) {&#10;            // fallback longer wait&#10;            try {&#10;                page.waitForSelector(&quot;.sweet-alert, .swal2-container&quot;, new Page.WaitForSelectorOptions().setTimeout(7000));&#10;            } catch (Exception ignored) {}&#10;        }&#10;    }&#10;&#10;    @Then(&quot;order should be placed successfully&quot;)&#10;    public void order_should_be_placed_successfully() {&#10;        String confirmationText = orderPage.getConfirmationText();&#10;        System.out.println(&quot;Order confirmation text found: &quot; + confirmationText);&#10;&#10;        // Accept several possibilities: meaningful confirmation text containing 'thank' OR 'purchase' OR 'id'&#10;        boolean textMatches = false;&#10;        if (confirmationText != null) {&#10;            String lower = confirmationText.toLowerCase();&#10;            textMatches = lower.contains(&quot;thank&quot;) || lower.contains(&quot;purchase&quot;) || lower.contains(&quot;id&quot;) || lower.contains(&quot;order&quot;);&#10;        }&#10;&#10;        boolean popupPresent = orderPage.isOrderSuccessful();&#10;&#10;        Assert.assertTrue(&quot;Order confirmation not found. text='&quot; + confirmationText + &quot;', popupPresent=&quot; + popupPresent,&#10;                textMatches || popupPresent);&#10;&#10;        // close dialog&#10;        orderPage.clickOk();&#10;    }&#10;&#10;}&#10;" />
              <option name="updatedContent" value="package steps;&#10;&#10;import com.microsoft.playwright.Page;&#10;import io.cucumber.java.en.*;&#10;import org.junit.Assert;&#10;import pages.HomePage;&#10;import pages.ProductPage;&#10;import pages.CartPage;&#10;import pages.OrderPage;&#10;import utils.JsonUtil;&#10;import utils.PlaywrightFactory;&#10;import hooks.Hooks;&#10;&#10;&#10;public class HomeSteps {&#10;&#10;    Page page = PlaywrightFactory.getPage();&#10;    HomePage homePage = new HomePage(page);&#10;    ProductPage productPage = new ProductPage(page);&#10;    CartPage cartPage = new CartPage(page);&#10;    OrderPage orderPage = new OrderPage(page);&#10;&#10;    // -------------------- Existing Steps --------------------&#10;&#10;    @Given(&quot;user launches Demoblaze application&quot;)&#10;    public void user_launches_application() {&#10;        homePage.openApplication(JsonUtil.get(&quot;application.url&quot;));&#10;    }&#10;&#10;    @Then(&quot;home page should be displayed&quot;)&#10;    public void home_page_displayed() {&#10;        Assert.assertTrue(homePage.isLoginVisible());&#10;    }&#10;&#10;    @When(&quot;user signs up with valid data&quot;)&#10;    public void user_signs_up() {&#10;        // Signup already handled in Hooks&#10;        Assert.assertTrue(true);&#10;    }&#10;&#10;    @Then(&quot;signup should be successful&quot;)&#10;    public void signup_successful() {&#10;        Assert.assertTrue(true);&#10;    }&#10;&#10;    @When(&quot;user logs in with valid data&quot;)&#10;    public void user_logs_in_with_valid_data() {&#10;&#10;        // If already logged in, skip the login steps to avoid repeated login modals&#10;        if (homePage.isLoginSuccessful() || homePage.isLogoutVisible()) {&#10;            return;&#10;        }&#10;&#10;        String username = Hooks.getSignupUsername();&#10;        String password = Hooks.getSignupPassword();&#10;&#10;        try {&#10;            page.waitForSelector(&quot;#login2&quot;,&#10;                    new Page.WaitForSelectorOptions().setTimeout(5000));&#10;        } catch (Exception ignored) {&#10;        }&#10;&#10;        homePage.login(username, password);&#10;    }&#10;&#10;    @Then(&quot;login should be successful&quot;)&#10;    public void login_should_be_successful() {&#10;        String welcome = homePage.getWelcomeText();&#10;        Assert.assertTrue(&#10;                &quot;Login failed. Welcome text: '&quot; + welcome + &quot;'&quot;,&#10;                homePage.isLoginSuccessful()&#10;        );&#10;    }&#10;&#10;    // -------------------- Cart Step Definitions --------------------&#10;&#10;    @When(&quot;user selects product {string}&quot;)&#10;    public void user_selects_product(String productName) {&#10;        homePage.selectProduct(productName);&#10;    }&#10;&#10;    @When(&quot;user adds product to cart&quot;)&#10;    public void user_adds_product_to_cart() {&#10;        // ProductPage.addToCart() now handles dialog acceptance via onceDialog()&#10;        productPage.addToCart();&#10;    }&#10;&#10;    @Then(&quot;product should be added to cart successfully&quot;)&#10;    public void product_should_be_added_to_cart_successfully() {&#10;        homePage.openCart();&#10;        Assert.assertTrue(cartPage.isProductPresent());&#10;    }&#10;&#10;    @When(&quot;user navigates to cart page&quot;)&#10;    public void user_navigates_to_cart_page() {&#10;        homePage.openCart();&#10;    }&#10;&#10;    @Then(&quot;selected product should be displayed in cart&quot;)&#10;    public void selected_product_should_be_displayed_in_cart() {&#10;        Assert.assertTrue(cartPage.isProductPresent());&#10;    }&#10;&#10;    @When(&quot;user deletes the product from cart&quot;)&#10;    public void user_deletes_the_product_from_cart() {&#10;        cartPage.deleteProduct();&#10;    }&#10;&#10;    @Then(&quot;cart should be empty&quot;)&#10;    public void cart_should_be_empty() {&#10;        Assert.assertTrue(cartPage.isCartEmpty());&#10;    }&#10;&#10;    // -------------------- Place Order --------------------&#10;&#10;    @When(&quot;user clicks on Place Order&quot;)&#10;    public void user_clicks_on_place_order() {&#10;        try {&#10;            // Use OrderPage helper to click&#10;            orderPage.clickPlaceOrder();&#10;            page.waitForSelector(&quot;#orderModal&quot;, new Page.WaitForSelectorOptions().setTimeout(5000));&#10;        } catch (Exception e) {&#10;            // fallback to previous approach&#10;            try {&#10;                page.click(&quot;text=Place Order&quot;);&#10;                page.waitForSelector(&quot;#orderModal&quot;, new Page.WaitForSelectorOptions().setTimeout(5000));&#10;            } catch (Exception ignored) {&#10;            }&#10;        }&#10;    }&#10;&#10;    @When(&quot;user enters order details&quot;)&#10;    public void user_enters_order_details() {&#10;        String name = &quot;Test User&quot;;&#10;        String country = &quot;India&quot;;&#10;        String city = &quot;Pune&quot;;&#10;        String card = &quot;4111111111111111&quot;;&#10;        String month = &quot;12&quot;;&#10;        String year = &quot;2025&quot;;&#10;&#10;        try { name = JsonUtil.get(&quot;order.name&quot;); } catch (Exception ignored) {}&#10;        try { country = JsonUtil.get(&quot;order.country&quot;); } catch (Exception ignored) {}&#10;        try { city = JsonUtil.get(&quot;order.city&quot;); } catch (Exception ignored) {}&#10;        try { card = JsonUtil.get(&quot;order.card&quot;); } catch (Exception ignored) {}&#10;        try { month = JsonUtil.get(&quot;order.month&quot;); } catch (Exception ignored) {}&#10;        try { year = JsonUtil.get(&quot;order.year&quot;); } catch (Exception ignored) {}&#10;&#10;        // Use OrderPage helper to fill form&#10;        orderPage.fillOrderForm(name, country, city, card, month, year);&#10;    }&#10;&#10;    @When(&quot;user confirms the purchase&quot;)&#10;    public void user_confirms_the_purchase() {&#10;        // Use OrderPage helper to click purchase and wait for confirmation&#10;        orderPage.clickPurchase();&#10;        // Wait briefly and then rely on OrderPage.isOrderSuccessful&#10;        try {&#10;            Thread.sleep(800); // short pause to allow dialog&#10;        } catch (InterruptedException ignored) {}&#10;        if (!orderPage.isOrderSuccessful()) {&#10;            // fallback longer wait&#10;            try {&#10;                page.waitForSelector(&quot;.sweet-alert, .swal2-container&quot;, new Page.WaitForSelectorOptions().setTimeout(7000));&#10;            } catch (Exception ignored) {}&#10;        }&#10;    }&#10;&#10;    @Then(&quot;order should be placed successfully&quot;)&#10;    public void order_should_be_placed_successfully() {&#10;        String confirmationText = orderPage.getConfirmationText();&#10;        System.out.println(&quot;Order confirmation text found: &quot; + confirmationText);&#10;&#10;        // Accept several possibilities: meaningful confirmation text containing 'thank' OR 'purchase' OR 'id'&#10;        boolean textMatches = false;&#10;        if (confirmationText != null) {&#10;            String lower = confirmationText.toLowerCase();&#10;            textMatches = lower.contains(&quot;thank&quot;) || lower.contains(&quot;purchase&quot;) || lower.contains(&quot;id&quot;) || lower.contains(&quot;order&quot;);&#10;        }&#10;&#10;        boolean popupPresent = orderPage.isOrderSuccessful();&#10;&#10;        Assert.assertTrue(&quot;Order confirmation not found. text='&quot; + confirmationText + &quot;', popupPresent=&quot; + popupPresent,&#10;                textMatches || popupPresent);&#10;&#10;        // close dialog&#10;        orderPage.clickOk();&#10;    }&#10;&#10;}" />
            </PendingDiffInfo>
          </value>
        </entry>
      </map>
    </option>
  </component>
</project>